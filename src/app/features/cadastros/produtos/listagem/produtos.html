<p-card header="Produtos">
    <div class="flex justify-between mt-20">
        <p-button
                [disabled]="loading"
                icon="pi pi-refresh"
                [rounded]="true"
                [text]="true"
                severity="secondary"
                (onClick)="loadCategories();loadProducts();"
            />
        <p-button [disabled]="loading" label="Adicionar Produto" (onClick)="router.navigate(['/cadastros/produtos/new'])" />
    </div>
    <div class="mt-20">
        <p-table
            [value]="products"
            [loading]="loading"
            [paginator]="true"
            [rows]="10"
            [responsiveLayout]="'scroll'"
        >
            <ng-template pTemplate="header">
                <tr>
                    <th>#</th>
                    <th>Nome</th>
                    <th>Descrição</th>
                    <th>Codigo</th>
                    <th>Categoria</th>
                    <th>Acoes</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-product>
                <tr>
                    <td>{{ product.id }}</td>
                    <td>{{ product.label }}</td>
                    <td>{{ product.description }}</td>
                    <td>{{ product.Code == null ? '-' : product.Code }}</td>
                    <td> {{ getCategoryPath(product.treeId) }} </td>
                    <td>
                        <p-button
                            icon="pi pi-check"
                            [rounded]="true"
                            [text]="true"
                            (onClick)="router.navigate(['/cadastros/produtos', product.id])"
                        />
                        <p-button
                            icon="pi pi-times"
                            [rounded]="true"
                            [text]="true"
                            severity="danger"
                            (onClick)="confirmarExclusao($event, product.id)"
                        />
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>
</p-card>
